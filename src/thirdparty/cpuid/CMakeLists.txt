cmake_minimum_required(VERSION 2.6)
project(cpuid)

IF(MSVC)
	SET(CPUID_MSVC 1)
ENDIF(MSVC)
IF(CMAKE_COMPILER_IS_GNUCC)
	SET(CPUID_GNUCC 1)
ENDIF(CMAKE_COMPILER_IS_GNUCC)
IF(${CMAKE_CXX_COMPILER_ID} STREQUAL "Clang")
	SET(CPUID_CLANG 1)
ENDIF(${CMAKE_CXX_COMPILER_ID} STREQUAL "Clang")
IF(${CMAKE_SYSTEM_NAME} STREQUAL "Linux")
	SET(CPUID_LINUX 1)
ENDIF(${CMAKE_SYSTEM_NAME} STREQUAL "Linux")
IF(${CMAKE_SYSTEM_NAME} STREQUAL "Darwin")
	SET(CPUID_DARWIN 1)
ENDIF(${CMAKE_SYSTEM_NAME} STREQUAL "Darwin")
IF(${CMAKE_SYSTEM_NAME} STREQUAL "Windows")
	SET(CPUID_WINDOWS 1)
ENDIF(${CMAKE_SYSTEM_NAME} STREQUAL "Windows")

CONFIGURE_FILE(cpuid_config.hpp.in cpuid_config.hpp)

set(CPUID_SRCS
    cpuid/cpuinfo.cpp)

add_library(cpuid STATIC ${CPUID_SRCS})
target_include_directories(cpuid PUBLIC ${CMAKE_CURRENT_BINARY_DIR})
